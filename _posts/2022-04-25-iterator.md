---
title: Javascript Iterator ì •ë¦¬
categories: Javscript
tags: [TIL, Javascript]
excerpt: Iterable? Iterator?
---

# Iterable

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë°°ì—´ì€ ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ì´ë©° ì´ëŸ¬í•œ ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ë¥¼ iterable objectë¼ê³  í•œë‹¤. ë°˜ë³µ ê°€ëŠ¥í•œ ê°ì²´ëŠ” ES2015(ES6)ì—ì„œ ë„ì…ì´ ë˜ì—ˆê³  iterable ìš”ì†Œë“¤ì„ ìˆœíšŒí•  ìˆ˜ ìˆëŠ” ë¬¸ë²•ì¸ `for of` êµ¬ë¬¸ë„ í•¨ê»˜ ë„ì…ë˜ì—ˆë‹¤. **iterable**ì„ ì¶©ì¡±í•˜ê¸° ìœ„í•´ì„œëŠ” ì¡°ê±´ì´ ìˆëŠ”ë° ë°”ë¡œ ê°ì²´ì— `Symbol.iterator` ì†ì„±ì´ êµ¬í˜„ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

# Symbol.iterator

Symbol.iteratorëŠ” objectë¥¼ ë°˜í™˜í•˜ë©° argumentsê°€ ì—†ëŠ” í•¨ìˆ˜ë¡œ iterator protocolì„ ë”°ë¥¸ë‹¤.

> â“ iterator()ê°€ ì•„ë‹ˆë¼ [Symbol.iterator] ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ   
> : ê¸°ì¡´ì— ì‘ì„±ëœ ì½”ë“œì—ì„œ ì–´ë–¤ ê°ì²´ê°€ ì´ë¯¸ `.iterator()`ë¼ëŠ” ë©”ì†Œë“œë¥¼ ê°–ê³  ìˆìœ¼ë©´ ë¬¸ì œê°€ ìƒê¸°ê¸° ë•Œë¬¸ì— iteratorë¼ëŠ” í‰ë²”í•œ ë¬¸ìì—´ ì´ë¦„ëŒ€ì‹  Symbolì„ ì‚¬ìš©í•œ ê³ ìœ  ë©”ì†Œë“œë¥¼ ì •ì˜í•´ì¤€ ê²ƒì´ë¼ê³  í•œë‹¤.

> â“ ìœ ì‚¬ ë°°ì—´(array-like)ì™€ iterableì€ ê°™ë‹¤?  
> ìœ ì‚¬ë°°ì—´ì€ ì¸ë±ìŠ¤ì™€ length í”„ë¡œí¼í‹°ê°€ ìˆì–´ ë°°ì—´ì²˜ëŸ¼ ë³´ì´ëŠ” ê°ì²´ë¥¼ ì˜ë¯¸í•˜ê³  iterableì€ Symbol.iteratorê°€ êµ¬í˜„ëœ ê°ì²´ë¡œ ì„œë¡œ ë‹¤ë¥´ë‹¤.
> ê·¸ëŸ¬ë‚˜ ìœ ì‚¬ë°°ì—´ì´ë©´ì„œ iterableì¸ ê°ì²´ë„ ì¡´ì¬í•˜ëŠ”ë° ë¬¸ìì—´ì´ ëŒ€í‘œì ì¸ ì˜ˆì´ë‹¤.

## iterator protocol

iterator protocolì€ valueë“¤ì˜ sequenceë¥¼ ë§Œë“œëŠ” í‘œì¤€ ë°©ë²•ì„ ì •ì˜í•˜ë©° ì´ í‘œì¤€ì„ ë”°ë¥´ëŠ” ê°ì²´ë¥¼ `iterator`ë¼ê³  í•œë‹¤.
iterator protocolì€ ë‹¤ìŒê³¼ ê°™ë‹¤.

- ê°ì²´ëŠ” `next()` propertyë¥¼ ê°€ì§„ë‹¤.
- `next()` ë©”ì†Œë“œëŠ” ì•„ë˜ì˜ 2ê°œì˜ ì†ì„±ë“¤ì„ ê°€ì§„ objectë¥¼ ë°˜í™˜í•˜ëŠ” argumentsê°€ ì—†ëŠ” í•¨ìˆ˜ì´ë‹¤.
  - `value` : iteratorë¡œë¶€í„° ë°˜í™˜ë˜ëŠ” ê°’. doneì´ trueì¼ ê²½ìš° ìƒëµë  ìˆ˜ ìˆë‹¤.
  - `done`(boolean) : iteratorê°€ ë§ˆì§€ë§‰ ë°˜ë³µ ì‘ì—…ì„ ë§ˆì³¤ì„ ê²½ìš° `true`ì´ê³ , iteratorì˜ ì‘ì—…ì´ ë‚¨ì•„ìˆì„ ê²½ìš° `false`ì´ë©°, iteratorì— return ê°’ì´ ìˆë‹¤ë©´ value ê°’ìœ¼ë¡œ ì§€ì •ëœë‹¤.

`next()` ë©”ì†Œë“œëŠ” iterableì˜ ê° ìš”ì†Œë¥¼ ìˆœíšŒí•˜ê¸° ìœ„í•œ í¬ì¸í„° ì—­í• ì„ í•˜ê³ , í˜¸ì¶œ ì‹œë§ˆë‹¤ valueì™€ done ì†ì„±ì„ ê°€ì§„ iterator result ê°ì²´(`{value, done}`)ë¥¼ ë°˜í™˜í•œë‹¤.

ë‹¤ìŒì€ iterable ê°ì²´ ì¤‘ í•˜ë‚˜ì¸ ë¬¸ìì—´ ê°ì²´ì˜ ì˜ˆì‹œì´ë‹¤.

```js
var someString = "hi";
var iterator = someString[Symbol.iterator]();
iterator + ""; // "[object String Iterator]"

iterator.next(); // { value: "h", done: false }
iterator.next(); // { value: "i", done: false }
iterator.next(); // { value: undefined, done: true }
```

# iterable êµ¬í˜„

iterable ê°ì²´ëŠ” iterable protocolì— ë¶€í•©í•˜ë„ë¡ êµ¬í˜„í•˜ê¸°ë§Œ í•˜ë©´ ì–´ë–¤ ê°ì²´ë“  iterableì´ ë  ìˆ˜ ìˆë‹¤. iterableëŠ” ì¼ë°˜ í•¨ìˆ˜ë¡œ ì§ì ‘ êµ¬í˜„í•˜ê±°ë‚˜ `Generator`í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

## ì¼ë°˜ í•¨ìˆ˜ë¡œ êµ¬í˜„í•˜ê¸°

ì¼ë°˜ í•¨ìˆ˜ë¡œ iterableì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” `[Symbol.iterator]()` ë©”ì†Œë“œë¥¼ êµ¬í˜„í•´ì£¼ì–´ì•¼ í•œë‹¤.
ìœ„ì˜ [iterable protocol](#iterator-protocol)ì— ë‚˜ì™€ìˆëŠ” ê²ƒê³¼ ê°™ì´ `Symbol.iterator`ëŠ” objectë¥¼ ë°˜í™˜í•˜ë©° argumentsê°€ ì—†ëŠ” í•¨ìˆ˜ë¡œ iterator protocolì„ ë”°ë¼ì•¼í•˜ê¸° ë•Œë¬¸ì— next() ë©”ì†Œë“œë¥¼ êµ¬í˜„í•˜ê³  objectë¥¼ ë°˜í™˜í•˜ëŠ” ë“± iterator protocolì— ë§ê²Œ êµ¬í˜„í•´ì•¼ í•œë‹¤.

```js
var iterableObject = {
  [Symbol.iterator]() {
    let index = 0;
    return {
      next() {
        index++;
        if (index === 1) {
          return { value: "Iterable : " + index, done: false };
        } else if (index === 2) {
          return { value: "Iterable : " + index, done: false };
        } else if (index === 3) {
          return { value: "Iterable : " + index, done: false };
        }
        return { value: "", done: true };
      },
    };
  },
};
for (var val of iterableObject) {
  console.log(val);
}
```

## Generator í•¨ìˆ˜ ì‚¬ìš©í•˜ê¸°

ES2015ì— ë„ì…ëœ `Generator` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©´ generatorë¥¼ ë” ê°„ë‹¨í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. `Generator` í•¨ìˆ˜ëŠ” iterable ê°ì²´ë¥¼ ìƒì„±(ë°˜í™˜)í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. `function*`(function í‚¤ì›Œë“œ ëì— ë³„í‘œ) í‘œí˜„ì‹ìœ¼ë¡œ í•¨ìˆ˜ë¥¼ ì •ì˜í•œë‹¤.
[function\*](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Statements/function*)

```js
function* iterableObject(index) {
  yield "Iterable : " + index++;
  yield "Iterable : " + index++;
  yield "Iterable : " + index++;
}

for (const val of iterableObject(1)) {
  console.log(val);
}
```

### Generator í•¨ìˆ˜ì˜ ë‹¤ì–‘í•œ êµ¬í˜„ ë°©ë²•

Generator í•¨ìˆ˜ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.

```js
// generator í•¨ìˆ˜ ì„ ì–¸
function* gen1() {
  // ...
}

// í‘œí˜„ì‹ìœ¼ë¡œ ì‚¬ìš©
const gen2 = function* () {
  // ...
};

// ë©”ì†Œë“œ ë¬¸ë²•ìœ¼ë¡œ ì‚¬ìš©
const obj = {
  *gen3() {
    // ...
  },
};
```

## yield

`Generator` í•¨ìˆ˜ ì•ˆì—ì„œëŠ” [yield](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/yield) ë¼ëŠ” íŠ¹ë³„í•œ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
returnê³¼ ìœ ì‚¬í•œ ì—­í• ì„ í•˜ë©°, iterableì˜ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ë•Œ yield í‚¤ì›Œë“œ ë’¤ì— ìˆëŠ” ê°’ë“¤ì„ ìˆœì„œëŒ€ë¡œ ë„˜ê²¨ì¤€ë‹¤.

```js
function* countAppleSales() {
  let saleList = [3, 7, 5];
  for (let i = 0; i < saleList.length; i++) {
    yield saleList[i];
  }
}

let appleStore = countAppleSales(); // Generator { }
console.log(appleStore.next()); // { value: 3, done: false }
console.log(appleStore.next()); // { value: 7, done: false }
console.log(appleStore.next()); // { value: 5, done: false }
console.log(appleStore.next()); // { value: undefined, done: true }
```

> ğŸ“– ì°¸ê³   
> [mdn web docs](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Iteration_protocols)  
> [How to use the Generator function\* in JavaScript (continuedâ€¦)](https://javascript.plainenglish.io/how-to-use-the-generator-function-in-javascript-continued-aada07d220c7)  
> [Iterable](https://helloworldjavascript.net/pages/260-iteration.html)  
> [iterable ê°ì²´](https://ko.javascript.info/iterable)
